#!/var/bin/python
"""
Plot the predicted Energy produced color on a T vs Daylight plot

"""
import numpy as np
from sklearn.utils import check_arrays
from sklearn import linear_model
from sklearn import preprocessing
from sklearn import svm
from utility_extra import mape
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

# Columns of data:
# 0-ID  1-Label  2-House  3-Year  4-Month  5-Temperature  6-Daylight  7-EnergyProduction
data_train = np.loadtxt("/home/nicolas/workspace/camenergydatalab/EnergyDataSimulationChallenge/challenge1/data/training_dataset_500.csv", delimiter=',', skiprows=1)
data_test = np.loadtxt("/home/nicolas/workspace/camenergydatalab/EnergyDataSimulationChallenge/challenge1/data/test_dataset_500.csv", delimiter=',', skiprows=1)

x_train = data_train[:, [2, 4, 5, 6]]
y_train = data_train[:,7]
x_test = data_test[:, [2, 4, 5, 6]]
y_test = data_test[:, 7]

x_data = x_train
y_data = y_train
#fig = plt.figure()
#ax = fig.add_subplot(111, projection='3d')
#ax = Axes3D()
plt.scatter(x_data[:,3], x_data[:,2], c=y_data, cmap='hot')
plt.xlabel("Daylight")
plt.ylabel("T")

############################
regr = linear_model.LinearRegression()
regr.fit(x_train, y_train)
pred = regr.predict(x_test)
mape(y_test, regr.predict(x_test))
# 18.071539582884451 %

regr.coef_


plt.show()




